"use strict";(self.webpackChunkfinancesapp=self.webpackChunkfinancesapp||[]).push([[915],{915:(b,x,e)=>{e.r(x),e.d(x,{ContasModule:()=>z});var a=e(6895),v=e(6630),u=e(5861),h=e(7271),O=e(9282),M=e(9458),s=e(4006),d=e(8341),c=e(9909),t=e(4650),P=e(1377),_=e(1279),C=e(1223),y=e(9722),T=e(6201),Z=e(6766),A=e(8202),w=e(3686);const F=["instituicaoInput"];function S(i,l){if(1&i&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&i){const n=l.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n.instituicao," ")}}function U(i,l){if(1&i&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&i){const n=l.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n.instituicao," ")}}let I=(()=>{class i{constructor(n,o,r,p){this.data=n,this.dialogRef=o,this.fb=r,this._contaService=p,this.allInstituicoes=["Nubank","Neon","Bradesco","C6","Inter","Itau","BTG","Unicred"],this.instituicaoFinanceira=[],this.selectable=!0,this.removable=!0,this.currencyOption={allowNegative:!1,allowZero:!1,nullable:!1,suffix:"",max:99999999,min:0,precision:2,align:"left",thousands:".",decimal:",",prefix:"R$"},this.tiposConta=[{id:1,descricao:"Conta Corrente"},{id:2,descricao:"Investimentos"},{id:3,descricao:"Dinheiro"},{id:4,descricao:"Outros"}],this.separatorKeysCodes=[c.OC],this.usAmount=0,this.contas=[]}ngOnInit(){this.isMobile=window.innerWidth<768,this.montarFormulario(),this.tipoOperacao=this.data.tipoOperacao,this.buscarContas()}buscarContas(){var n=this;return(0,u.Z)(function*(){n.loading=!0,n.contas=yield n._contaService.buscarContas().toPromise(),n.loading=!1})()}byId(n,o){return n._id===o._id}updateUSAmount(n){this.usAmount=n.target.value}preencherFormulario(){this.formConta.reset(this.data.conta)}by(n,o){return n===o}montarFormulario(){this.formConta=this.fb.group({saldo:this.fb.control(null,[s.kI.required]),contaOrigem:this.fb.control(null,[s.kI.required]),contaDestino:this.fb.control(null,[s.kI.required])})}enviarFormulario(){var n=this;return(0,u.Z)(function*(){if(n.formConta.invalid)return;let o=n.formConta.value,r={_id:o.contaOrigem._id,saldo:o.contaOrigem.saldo-+n.formConta.get("saldo").value,instituicao:o.contaOrigem.instituicao,tipoConta:o.contaOrigem.tipoConta},p={_id:o.contaDestino._id,saldo:o.contaDestino.saldo+ +n.formConta.get("saldo").value,instituicao:o.contaDestino.instituicao,tipoConta:o.contaDestino.tipoConta};yield n._contaService.atualizarConta(r).toPromise(),yield n._contaService.atualizarConta(p).toPromise(),n.dialogRef.close(!0)})()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(d.WI),t.Y36(d.so),t.Y36(s.qu),t.Y36(h.p))},i.\u0275cmp=t.Xpm({type:i,selectors:[["finances-app-formulario-conta"]],viewQuery:function(n,o){if(1&n&&t.Gf(F,5),2&n){let r;t.iGM(r=t.CRH())&&(o.instituicaoInput=r.first)}},decls:36,vars:14,consts:[["mat-dialog-title",""],[2,"font-weight","500","color","rgb(50, 61, 164)"],["mat-dialog-content",""],["novalidate","","autocomplete","off","id","formConta",3,"formGroup"],[1,"row"],[1,"col-12"],["type","tel","required","","currencyMask","","formControlName","saldo","matInput","","placeholder","Valor a ser transferido:"],[1,"col-5"],["formControlName","contaOrigem",3,"compareWith"],[3,"value",4,"ngFor","ngForOf"],[1,"col-2",2,"display","flex","align-items","center","justify-content","center"],["formControlName","contaDestino",3,"compareWith"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","form","formConta","type","submit","color","primary",3,"click"],[3,"value"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1," Transfeir entre "),t.TgZ(2,"span",1),t._uU(3," Contas "),t.qZA()(),t.TgZ(4,"div",2)(5,"form",3)(6,"div",4)(7,"mat-form-field",5),t._UZ(8,"input",6),t.TgZ(9,"mat-error"),t._uU(10),t.ALo(11,"errorKeys"),t.qZA()(),t.TgZ(12,"mat-form-field",7)(13,"mat-label"),t._uU(14,"Conta Origem"),t.qZA(),t.TgZ(15,"mat-select",8),t.YNc(16,S,2,2,"mat-option",9),t.qZA(),t.TgZ(17,"mat-error"),t._uU(18),t.ALo(19,"errorKeys"),t.qZA()(),t.TgZ(20,"div",10)(21,"mat-icon"),t._uU(22,"keyboard_arrow_right"),t.qZA()(),t.TgZ(23,"mat-form-field",7)(24,"mat-label"),t._uU(25,"Conta Destino"),t.qZA(),t.TgZ(26,"mat-select",11),t.YNc(27,U,2,2,"mat-option",9),t.qZA(),t.TgZ(28,"mat-error"),t._uU(29),t.ALo(30,"errorKeys"),t.qZA()()()()(),t.TgZ(31,"mat-dialog-actions",12)(32,"button",13),t._uU(33,"Cancelar"),t.qZA(),t.TgZ(34,"button",14),t.NdJ("click",function(){return o.enviarFormulario()}),t._uU(35," Transferir "),t.qZA()()),2&n&&(t.xp6(5),t.Q6J("formGroup",o.formConta),t.xp6(5),t.hij(" ",t.lcZ(11,8,null==o.formConta.controls.saldo?null:o.formConta.controls.saldo.errors)," "),t.xp6(5),t.Q6J("compareWith",o.byId),t.xp6(1),t.Q6J("ngForOf",o.contas),t.xp6(2),t.hij(" ",t.lcZ(19,10,null==o.formConta.controls.contaOrigem?null:o.formConta.controls.contaOrigem.errors)," "),t.xp6(8),t.Q6J("compareWith",o.byId),t.xp6(1),t.Q6J("ngForOf",o.contas),t.xp6(2),t.hij(" ",t.lcZ(30,12,null==o.formConta.controls.contaDestino?null:o.formConta.controls.contaDestino.errors)," "))},dependencies:[a.sg,P.lW,_.Hw,C.TO,C.KE,C.hX,y.gD,T.ey,Z.Nt,d.ZT,d.uh,d.xY,d.H8,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,A.g1,w.s],styles:["@media only screen and (max-width: 768px){.col-5[_ngcontent-%COMP%], .col-2[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:100%!important}}"]}),i})();var D=e(7696),J=e(7413),E=e(9824),L=e(4178);function N(i,l){if(1&i){const n=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.transferenciaContas())}),t.TgZ(1,"mat-icon"),t._uU(2,"cached"),t.qZA()()}}const Q=[{path:"",component:(()=>{class i{constructor(n,o,r,p){var f=this;this.dialog=n,this._contaService=o,this._headerMesAnoService=r,this._operacoesService=p,this.contas=[],this.despesas=[],this.receitas=[],this.receitasTotal=[],this.despesasTotal=[],this.a=this._headerMesAnoService.getMesAno().subscribe(g=>{!g.mes||(this.mes=g.mes,this.ano=g.ano,this.calcularSaldoPrevisto())}),this._contaService.getConta().subscribe(function(){var g=(0,u.Z)(function*(m){!m||(f.contas=m,f.buscarContas())});return function(m){return g.apply(this,arguments)}}()),this._operacoesService.getReceitas().subscribe(function(){var g=(0,u.Z)(function*(m){!m||(f.receitasTotal=m,f.buscarContas())});return function(m){return g.apply(this,arguments)}}()),this._operacoesService.getDespesas().subscribe(function(){var g=(0,u.Z)(function*(m){!m||(f.despesasTotal=m,f.buscarContas())});return function(m){return g.apply(this,arguments)}}())}ngOnInit(){var n=this;return(0,u.Z)(function*(){n.isMobile=window.innerWidth<768,n.loading=!0,yield n.calcularSaldoPrevisto(),n.loading=!1})()}ngOnDestroy(){this.a.unsubscribe()}buscarContas(n){var o=this;return(0,u.Z)(function*(){return n&&(o.contas=yield o._contaService.buscarContas().toPromise(),o._contaService.setConta(o.contas)),o.calcularSaldoAtual(),yield o.calcularSaldoPrevisto(),o.contas})()}calcularSaldoAtual(){this.saldoAtual=this.contas.reduce((n,o)=>n+o.saldo,0)}calcularSaldoPrevisto(){var n=this;return(0,u.Z)(function*(){try{n.receitas=n._operacoesService.calcularOperacoes(n.receitasTotal,n.mes,n.ano),n.despesas=n._operacoesService.calcularOperacoes(n.despesasTotal,n.mes,n.ano);const o=n.receitas.filter(p=>!p.efetivado).reduce((p,f)=>p+f.valor,0),r=n.despesas.filter(p=>!p.efetivado).reduce((p,f)=>p+f.valor,0);n.saldoPrevisto=n.saldoAtual-r+o}finally{}})()}transferenciaContas(){var n=this;this.dialog.open(I,{width:"450px",autoFocus:!0,data:{}}).afterClosed().subscribe(function(){var o=(0,u.Z)(function*(r){r&&(n.buscarContas(!0),n.loading=!1)});return function(r){return o.apply(this,arguments)}}())}adicionarConta(){var n=this;this.dialog.open(O.V,{maxWidth:"400px",autoFocus:!0,data:{tipoOperacao:"Despesa"}}).afterClosed().subscribe(function(){var o=(0,u.Z)(function*(r){r&&(n.buscarContas(!0),n.loading=!1)});return function(r){return o.apply(this,arguments)}}())}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(d.uw),t.Y36(h.p),t.Y36(D.E),t.Y36(M.E))},i.\u0275cmp=t.Xpm({type:i,selectors:[["finances-app-contas"]],decls:14,vars:15,consts:[[1,"content_contas"],[1,"header"],["titulo","Saldo Atual","cor","rgb(53, 174, 150)","icone","attach_money",1,"mr-5",3,"loading","valor"],["titulo","Saldo Previsto","cor","#323DA4","icone","account_balance_wallet",1,"mr-5",3,"loading","valor"],["mat-mini-fab","","color","primary","matTooltip","Adicionar Conta",1,"add_operacao",2,"background-color","#323da4",3,"click"],["mat-mini-fab","","color","primary","class","transferir","matTooltip","Transferir Entre Contas","style","background-color: #35ae96; margin-left: 20px;",3,"click",4,"ngIf"],[1,"content"],[2,"width","100%",3,"contas","buscarContas"],["mat-mini-fab","","color","primary","matTooltip","Transferir Entre Contas",1,"transferir",2,"background-color","#35ae96","margin-left","20px",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"finances-app-fit-card",2),t.ALo(3,"currency"),t._UZ(4,"finances-app-fit-card",3),t.ALo(5,"currency"),t.TgZ(6,"button",4),t.NdJ("click",function(){return o.adicionarConta()}),t.TgZ(7,"mat-icon"),t._uU(8,"add"),t.qZA()(),t.YNc(9,N,3,0,"button",5),t.qZA(),t.TgZ(10,"div",6)(11,"h1"),t._uU(12,"Contas"),t.qZA(),t.TgZ(13,"finances-app-listar-contas",7),t.NdJ("buscarContas",function(){return o.buscarContas(!0)}),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("loading",o.loading)("valor",t.xi3(3,9,o.saldoAtual,"BRL")),t.xp6(2),t.Q6J("loading",o.loading)("valor",t.xi3(5,12,o.saldoPrevisto,"BRL")),t.xp6(5),t.Q6J("ngIf",(null==o.contas?null:o.contas.length)>1),t.xp6(1),t.Akn(o.isMobile?"width: 100%":"width: 50%"),t.xp6(3),t.Q6J("contas",o.contas))},dependencies:[a.O5,J.M,P.lW,_.Hw,E.gM,L.$,a.H9],styles:[".content_contas[_ngcontent-%COMP%]{padding:0 50px}.content_contas[_ngcontent-%COMP%]   .main_header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.content_contas[_ngcontent-%COMP%]   .main_header[_ngcontent-%COMP%]   .add_operacao[_ngcontent-%COMP%]{margin-left:30px}.content_contas[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.content_contas[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:40px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.content_contas[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px;font-weight:500}.content_contas[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .item-50[_ngcontent-%COMP%]{flex-basis:50%;padding:0 15px;margin-top:10px}.content_contas[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .item-100[_ngcontent-%COMP%]{flex:1;flex-basis:100%;padding:0 15px;margin-top:20px}@media only screen and (max-width: 768px){.header[_ngcontent-%COMP%]{justify-content:space-between!important;padding:0 15px;margin-bottom:25px}.card_saldo_contas[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:55px!important}.fitcard[_ngcontent-%COMP%]{width:50%}.content_contas[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{flex-direction:row}.content_contas[_ngcontent-%COMP%]{padding:0;margin-top:120px}.content[_ngcontent-%COMP%]{padding:0 15px}.add_operacao[_ngcontent-%COMP%]{position:fixed;right:10px;bottom:90px;width:55px;height:55px}.transferir[_ngcontent-%COMP%]{position:fixed;right:10px;bottom:170px;width:55px;height:55px}}"]}),i})()}];let j=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[v.Bz.forChild(Q),v.Bz]}),i})();var B=e(5455),R=e(5512),W=e(9668),Y=e(7335);let z=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[a.ez,j,B.M,R.h,W.b,Y._]}),i})()},4178:(b,x,e)=>{e.d(x,{$:()=>M});var a=e(4650),v=e(9282),u=e(8341),h=e(6895);function O(s,d){if(1&s){const c=a.EpF();a.TgZ(0,"div",2),a.NdJ("click",function(){const _=a.CHM(c).$implicit,C=a.oxw();return a.KtG(C.editarConta(_))}),a.TgZ(1,"div",3)(2,"div",4),a._UZ(3,"img",5),a.qZA(),a.TgZ(4,"h2"),a._uU(5),a.qZA(),a.TgZ(6,"h3"),a._uU(7),a.qZA(),a.TgZ(8,"div",6)(9,"p")(10,"b"),a._uU(11),a.ALo(12,"currency"),a.qZA()()()()()}if(2&s){const c=d.$implicit;a.xp6(3),a.Q6J("src","/assets/"+c.instituicao.toLowerCase()+".png",a.LSH),a.xp6(2),a.Oqu(c.instituicao),a.xp6(2),a.Oqu(c.tipoConta),a.xp6(4),a.Oqu(a.xi3(12,4,c.saldo,"BRL"))}}let M=(()=>{class s{constructor(c){this.dialog=c,this.buscarContas=new a.vpe}ngOnInit(){}editarConta(c){this.dialog.open(v.V,{maxWidth:"400px",data:{conta:c}}).afterClosed().subscribe(t=>{t&&this.buscarContas.emit(!0)})}}return s.\u0275fac=function(c){return new(c||s)(a.Y36(u.uw))},s.\u0275cmp=a.Xpm({type:s,selectors:[["finances-app-listar-contas"]],inputs:{contas:"contas",origin:"origin"},outputs:{buscarContas:"buscarContas"},decls:2,vars:1,consts:[[1,"contas"],["class","conta",3,"click",4,"ngFor","ngForOf"],[1,"conta",3,"click"],[1,"content"],[1,"imagem"],["alt","BTC",2,"max-width","50px",3,"src"],[1,"saldos"]],template:function(c,t){1&c&&(a.TgZ(0,"div",0),a.YNc(1,O,13,7,"div",1),a.qZA()),2&c&&(a.xp6(1),a.Q6J("ngForOf",t.contas))},dependencies:[h.sg,h.H9],styles:['.contas[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-flow:row wrap;gap:20px}.contas[_ngcontent-%COMP%]   .conta[_ngcontent-%COMP%]{cursor:pointer;flex-basis:20%;flex-grow:0;background-color:#212121;color:#fff;transition:box-shadow .3s cubic-bezier(.4,0,.2,1) 0ms;border-radius:10px;padding:0 9px;overflow:hidden;min-width:150px}.contas[_ngcontent-%COMP%]   .conta[_ngcontent-%COMP%]:hover{box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;transition:box-shadow .3s cubic-bezier(.4,0,.2,1) 0ms}.contas[_ngcontent-%COMP%]   .conta[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:16px 16px 24px}.contas[_ngcontent-%COMP%]   .conta[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .imagem[_ngcontent-%COMP%]{position:relative;flex-shrink:0;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";line-height:1;overflow:hidden;-webkit-user-select:none;user-select:none;font-size:14px;font-weight:700;color:#fff;margin:18px 9px 9px -4.5px;display:flex;align-items:center;justify-content:center;padding:4.5px;border-radius:60px;height:49.5px;width:49.5px;background:rgba(34,51,84,.07);max-width:50px}.contas[_ngcontent-%COMP%]   .conta[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:700;font-size:14px;line-height:1.334;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.contas[_ngcontent-%COMP%]   .conta[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:400;line-height:1.75;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#ffffff6b}.contas[_ngcontent-%COMP%]   .conta[_ngcontent-%COMP%]   .saldos[_ngcontent-%COMP%]{border-radius:48px;opacity:1;margin-top:20px}.contas[_ngcontent-%COMP%]   .conta[_ngcontent-%COMP%]   .saldos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{margin:0 0 4px;font-weight:700;font-size:20px;line-height:1.4;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.contas[_ngcontent-%COMP%]   .conta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}h1[_ngcontent-%COMP%]{font-size:30px;font-weight:500}.item-50[_ngcontent-%COMP%]{flex-basis:50%;padding:0 15px;margin-top:10px}.item-100[_ngcontent-%COMP%]{flex:1;flex-basis:100%;padding:0 15px;margin-top:20px}@media only screen and (max-width: 768px){.conta[_ngcontent-%COMP%]{flex-basis:100%!important}.contas[_ngcontent-%COMP%]{flex-flow:row wrap!important}}']}),s})()}}]);